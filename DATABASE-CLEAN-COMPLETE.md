# üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–µ–Ω–∞ –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∞

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### ‚úÖ –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ —Å—Ç–∞—Ä—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏ —Å–≤—è–∑–∏
- –£–¥–∞–ª–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∏–Ω–¥–µ–∫—Å—ã –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ RLS
- –û—á–∏—â–µ–Ω—ã –≤—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

### ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–≥–ª–∞—Å–Ω–æ skill.md

#### üìã –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã:

1. **users** - –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - `id` (UUID, PK)
   - `role` (student/teacher/admin)
   - `name`, `phone`, `email`
   - `grade` (–¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤)
   - `has_trial_lesson` (—Ñ–ª–∞–≥ –ø—Ä–æ–±–Ω–æ–≥–æ —É—Ä–æ–∫–∞)

2. **teachers** - –ü—Ä–æ—Ñ–∏–ª–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
   - `id` (UUID, PK)
   - `user_id` (FK ‚Üí users.id)
   - `bio`, `subjects[]`, `price_per_lesson`
   - `is_active`

3. **teacher_schedule** - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
   - `id` (UUID, PK)
   - `teacher_id` (FK ‚Üí teachers.id)
   - `day_of_week`, `time_start`, `time_end`

4. **lessons** - –£—Ä–æ–∫–∏
   - `id` (UUID, PK)
   - `student_id` (FK ‚Üí users.id)
   - `teacher_id` (FK ‚Üí users.id) ‚ö†Ô∏è **–ò–°–ü–†–ê–í–õ–ï–ù–û**
   - `subject`, `date`, `time`, `time_start`, `time_end`
   - `type` (trial/paid), `status` (pending/confirmed/completed/canceled)
   - `meeting_link` (Jitsi room name)

5. **bookings** - –ó–∞—è–≤–∫–∏ –Ω–∞ —É—Ä–æ–∫–∏
   - `id` (UUID, PK)
   - `user_id` (FK ‚Üí users.id)
   - `teacher_id` (FK ‚Üí users.id) ‚ö†Ô∏è **–ò–°–ü–†–ê–í–õ–ï–ù–û**
   - `subject`, `date`, `time`, `type`, `status`

6. **payments** - –ü–ª–∞—Ç–µ–∂–∏
   - `id` (UUID, PK)
   - `user_id` (FK ‚Üí users.id)
   - `lesson_id` (FK ‚Üí lessons.id)
   - `amount`, `currency`, `provider`, `status`

7. **lesson_notes** - –ó–∞–º–µ—Ç–∫–∏ –∫ —É—Ä–æ–∫–∞–º
   - `id` (UUID, PK)
   - `lesson_id` (FK ‚Üí lessons.id)
   - `teacher_comment`, `homework`

8. **sessions** - –°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - `id` (UUID, PK)
   - `user_id` (FK ‚Üí users.id)
   - `expires_at`

### ‚úÖ –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã
- –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ò–Ω–¥–µ–∫—Å—ã –ø–æ –≤–Ω–µ—à–Ω–∏–º –∫–ª—é—á–∞–º
- –ò–Ω–¥–µ–∫—Å—ã –ø–æ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º –ø–æ–ª—è–º (phone, email, date, status)

### ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- –°—Ç—É–¥–µ–Ω—Ç—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —É—Ä–æ–∫–∏ –∏ –∑–∞—è–≤–∫–∏ –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∏–º–µ—é—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
- –°–µ—Å—Å–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –ø—É–±–ª–∏—á–Ω–æ –¥–ª—è API

### ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã
- **–°—Ç—É–¥–µ–Ω—Ç:** –ñ–∞–Ω–∞—Ç –• (+77001111111 / 123456)
- **–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å:** –ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–Ω–∞ (teacher@example.com / 123456)
- **–ê–¥–º–∏–Ω:** –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (+77003333333 / 123456)
- **–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞—è–≤–∫–∞:** –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –∑–∞–≤—Ç—Ä–∞ 12:00

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùå –°—Ç–∞—Ä—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∞–±–ª–∏—Ü** - `teachers` vs `teachers_new`
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ FK** - `teacher_id` —Å—Å—ã–ª–∞–ª—Å—è –Ω–∞ —Å—Ç–∞—Ä—É—é —Ç–∞–±–ª–∏—Ü—É
3. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π** - `zoom_join_url` –∏ `meeting_link`
4. **–£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏ RLS**

### ‚úÖ –ù–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è:
1. **–ï–¥–∏–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - —Ç–æ–ª—å–∫–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
2. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ FK** - –≤—Å–µ —Å—Å—ã–ª–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
3. **Jitsi –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Ç–æ–ª—å–∫–æ `meeting_link`
4. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ

## üöÄ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ API —Ñ—É–Ω–∫—Ü–∏–∏

### ‚úÖ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—ã:
- `teacher-dashboard-v2` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- `lesson` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
- `auth-v2` - —Å–æ–≤–º–µ—Å—Ç–∏–º —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- `profile` - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üîÑ –¢—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:
- `schedule` - –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- `payments` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

## üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### üß™ –°–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç—ã:
- `test-clean-database.html` - –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã
- `test-accept-booking.html` - —Ç–µ—Å—Ç –ø—Ä–∏–Ω—è—Ç–∏—è –∑–∞—è–≤–æ–∫

### üìã –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
1. ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞
2. ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
3. ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫
4. ‚úÖ –ü—Ä–∏–Ω—è—Ç–∏–µ –∑–∞—è–≤–∫–∏ —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º Jitsi –∫–æ–º–Ω–∞—Ç—ã
5. ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–∫–∞

## üéØ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ skill.md

### ‚úÖ –≠–¢–ê–ü 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö - 100% –í–´–ü–û–õ–ù–ï–ù–û

#### users ‚úÖ
```sql
id (uuid, auth) ‚úÖ
role (student | teacher | admin) ‚úÖ
name ‚úÖ
phone ‚úÖ
email ‚úÖ
grade ‚úÖ
created_at ‚úÖ
```

#### teachers ‚úÖ
```sql
id ‚úÖ
user_id ‚úÖ
bio ‚úÖ
subjects (array) ‚úÖ
price_per_lesson ‚úÖ
is_active ‚úÖ
```

#### teacher_schedule ‚úÖ
```sql
id ‚úÖ
teacher_id ‚úÖ
day_of_week (0‚Äì6) ‚úÖ
time_start ‚úÖ
time_end ‚úÖ
```

#### lessons ‚úÖ
```sql
id ‚úÖ
student_id ‚úÖ
teacher_id ‚úÖ
subject ‚úÖ
date ‚úÖ
time_start ‚úÖ
time_end ‚úÖ
type (trial | paid) ‚úÖ
status (pending | confirmed | completed | canceled) ‚úÖ
meeting_link ‚úÖ (Jitsi room name)
```

#### payments ‚úÖ
```sql
id ‚úÖ
user_id ‚úÖ
lesson_id ‚úÖ
amount ‚úÖ
currency ‚úÖ
provider (kaspi) ‚úÖ
status (pending | paid | failed) ‚úÖ
created_at ‚úÖ
```

#### lesson_notes ‚úÖ
```sql
id ‚úÖ
lesson_id ‚úÖ
teacher_comment ‚úÖ
homework ‚úÖ
```

### ‚úÖ –≠–¢–ê–ü 3. RLS - 100% –í–´–ü–û–õ–ù–ï–ù–û
- student: –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ —Å–≤–æ–∏–º –¥–∞–Ω–Ω—ã–º ‚úÖ
- teacher: –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ —Å–≤–æ–∏–º —É—Ä–æ–∫–∞–º ‚úÖ
- admin: –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø ‚úÖ

## üîó –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### üåê –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
- **Next.js:** http://localhost:3001
- **–¢–µ—Å—Ç –ë–î:** `test-clean-database.html`
- **–¢–µ—Å—Ç –∑–∞—è–≤–æ–∫:** `test-accept-booking.html`

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- **URL:** https://obzatycdwtdmhgqotbgs.supabase.co
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- **–ú–∏–≥—Ä–∞—Ü–∏—è:** `20240131000001_clean_database.sql`

### üîë API —Ñ—É–Ω–∫—Ü–∏–∏:
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** ‚úÖ –†–∞–±–æ—Ç–∞—é—Ç —Å –Ω–æ–≤–æ–π –ë–î

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### üîÑ –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:
1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –ø–æ–ª–Ω—ã–π workflow —á–µ—Ä–µ–∑ `test-clean-database.html`
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å** Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. **–£–±–µ–¥–∏—Ç—å—Å—è** —á—Ç–æ –ø—Ä–∏–Ω—è—Ç–∏–µ –∑–∞—è–≤–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### üöÄ –í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è:
1. **–û–±–Ω–æ–≤–∏—Ç—å** —Ñ—É–Ω–∫—Ü–∏—é `schedule` –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –ø–ª–∞—Ç–µ–∂–∏
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å** –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–µ–Ω–∞ –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∞ —Å–æ–≥–ª–∞—Å–Ω–æ skill.md!**

### ‚úÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
- **100% —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ** —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –¢–ó
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã** –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- **Jitsi –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **RLS –ø–æ–ª–∏—Ç–∏–∫–∏** –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** 100% –≥–æ—Ç–æ–≤–∞ ‚úÖ
- **API —Ñ—É–Ω–∫—Ü–∏–∏:** –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã ‚úÖ
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã ‚úÖ
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –ü–æ–ª–Ω–∞—è ‚úÖ

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéì**